<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bug Reports</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">

{% include 'header.html' %}

<main>
  <section>
    <h2>üêû –ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã</h2>

    <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">
      <input
        type="text"
        id="bugSearch"
        placeholder="–ü–æ–∏—Å–∫ –ø–æ ID –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..."
        style="flex:1; min-width:240px; padding:10px; border-radius:8px; border:1px solid #333; background:#0e0e0e; color:#eee;"
      >
    <div class="filter-container">
    <select id="statusFilter">
        <option value="all">–í—Å–µ</option>
        <option value="open">–¢–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ</option>
        <option value="closed">–¢–æ–ª—å–∫–æ –∑–∞–∫—Ä—ã—Ç—ã–µ</option>
    </select>
    </div>
    </div>

    <div class="bug-list">
      {% for issue in issues %}
        <div class="bug-card" data-status="{{ issue.state }}">
          <div class="bug-title">#{{ issue.number }} - {{ issue.title }}</div>
          <span class="bug-status {% if issue.state == 'open' %}status-open{% else %}status-closed{% endif %}">
            {{ issue.state }}
          </span>
          <p><a href="{{ issue.html_url }}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ GitHub</a></p>
        </div>
      {% endfor %}
      {% if issues|length == 0 %}
        <p>–ë–∞–≥–æ–≤ –Ω–µ—Ç!</p>
      {% endif %}
    </div>
  </section>
</main>

<script>
  const searchInput = document.getElementById("bugSearch");
  const statusFilter = document.getElementById("statusFilter");
  const bugCards = document.querySelectorAll(".bug-card");

  function filterBugs() {
    const query = searchInput.value.toLowerCase();
    const status = statusFilter.value;

    bugCards.forEach(card => {
      const title = card.querySelector(".bug-title").innerText.toLowerCase();
      const bugStatus = card.dataset.status.toLowerCase();

      const matchesText = title.includes(query);
      const matchesStatus = (status === "all") || (bugStatus === status);

      card.style.display = (matchesText && matchesStatus) ? "block" : "none";
    });
  }

  searchInput.addEventListener("input", filterBugs);
  statusFilter.addEventListener("change", filterBugs);
</script>

{% include 'footer.html' %}

</body>
</html>