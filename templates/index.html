<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Denis QA Portfolio</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

  <header>
    <h1>üß† Denis QA Portfolio</h1>
    <nav class="main-nav">
      <a href="{{ url_for('index') }}">üß† Home</a>
      <a href="{{ url_for('test_cases') }}">üìã Test Cases</a>
      <a href="{{ url_for('bug_reports') }}">üêû Bug Reports</a>
      <a href="{{ url_for('checklists') }}">‚úÖ Checklists</a>
      <a href="{{ url_for('test_plan') }}">üß™ Test Plan</a>
    </nav>
  </header>

  <main>

    <section id="about">
      <h2>üß† –û–±–æ –º–Ω–µ</h2>
      <p>
        –ü—Ä–∏–≤–µ—Ç! –Ø –î–µ–Ω–∏—Å - –Ω–∞—á–∏–Ω–∞—é—â–∏–π QA-–∏–Ω–∂–µ–Ω–µ—Ä.<br>
        –ò–∑—É—á–∞—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, Python, SQL, HTML, JS –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é.<br>
        –≠—Ç–æ—Ç —Å–∞–π—Ç - –º–æ–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç, –≥–¥–µ —è —Ç—Ä–µ–Ω–∏—Ä—É—é—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.
      </p>
    </section>

    <section id="projects">
      <h2>–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>
      <ul>
        <li><a href="{{ url_for('test_cases') }}">üìã Test Cases</a> - –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Å–∞–π—Ç–∞</li>
        <li><a href="{{ url_for('bug_reports') }}">üêû Bug Reports</a> - –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –º–Ω–æ–π –±–∞–≥–∏</li>
        <li><a href="{{ url_for('checklists') }}">‚úÖ Checklists</a> - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ UI-—á–µ–∫–ª–∏—Å—Ç—ã</li>
        <li><a href="{{ url_for('test_plan') }}">üß™ Test Plan</a> - –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞</li>
      </ul>
    </section>

    <section id="comments">
  <h2>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>

  <form id="commentForm" method="POST" class="comment-form">
    <div class="input-wrapper">
      <label for="name">–í–∞—à–µ –∏–º—è:</label>
      <span class="char-counter" id="nameCounter">0/16</span>
      <input type="text" id="name" name="name" placeholder="–í–∞—à–µ –∏–º—è" maxlength="16" required>
    </div>

    <div class="input-wrapper">
      <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
      <span class="char-counter" id="commentCounter">0/300</span>
      <textarea id="comment" name="comment" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." maxlength="300" required></textarea>
    </div>

    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>

  <div id="message" style="display:none; margin-top:10px; color:#8f8;">
    –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω ‚úÖ
  </div>

  <div class="comments">
    <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</h3>
    {% for name, comment in comments %}
      <div class="comment">
        <p><strong>{{ name }}</strong></p>
        <p>{{ comment }}</p>
      </div>
    {% else %}
      <p>–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.</p>
    {% endfor %}
  </div>
  <div class="counter-wrapper" style="display: flex; justify-content: space-between; font-size: 13px; color: #888;">
  </div>
  <script>
    const nameInput = document.querySelector('input[name="name"]');
    const commentInput = document.querySelector('textarea[name="comment"]');
    const nameCounter = document.getElementById('nameCounter');
    const commentCounter = document.getElementById('commentCounter');

    function updateCounters() {
      nameCounter.textContent = `${nameInput.value.length}/16`;
      commentCounter.textContent = `${commentInput.value.length}/300`;
    }

    // –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –≤–≤–æ–¥–µ
    nameInput.addEventListener('input', updateCounters);
    commentInput.addEventListener('input', updateCounters);
  </script>
</section>

<script>
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}

document.getElementById("commentForm").addEventListener("submit", async function(event) {
  event.preventDefault();

  const formData = new FormData(this);
  const name = formData.get("name");
  const comment = formData.get("comment");

  const csrfToken = getCookie("csrf_token");

  const response = await fetch("/", {
    method: "POST",
    headers: {
      "X-CSRFToken": csrfToken
    },
    body: formData
  });

  if (response.ok) {
    document.getElementById("message").style.display = "block";

    const commentsDiv = document.querySelector(".comments");
    const newComment = document.createElement("div");
    newComment.classList.add("comment");
    newComment.innerHTML = `
      <p><strong>${name}</strong></p>
      <p>${comment}</p>
    `;
    commentsDiv.insertBefore(newComment, commentsDiv.children[1]);

    this.reset();

    setTimeout(() => {
      document.getElementById("message").style.display = "none";
    }, 3000);
  } else {
    alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.");
  }
});
</script>
</main>
{% include 'footer.html' %}
</body>
</html>